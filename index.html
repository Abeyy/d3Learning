<!DOCTYPE html>
<html lang="en" dir="ltr">
<head>
  <meta charset="utf-8">
  <title>D3.JS Tutorial</title>
  <script src="https://d3js.org/d3.v5.js"></script>
</head>

<body>
    <h1>Learning D3.JS</h1>
    <p>D3 stands for 3 "D's": Data-Driven Documents.</p>
    <p>D3 uses CSS3 selectors to manipulate the DOM.</p>
    <hr>
    
    <h1>Selecting and Appending Elements to our Webpage</h1>
    <p>First, we need to fetch the library. We can import it via CDN.</p>
    <p>This is a paragraph to be mutated by D3</p>
    
    <script type="text/javascript">
      // We have multiple paragraphs, but the following affects the first p in the html:
      // d3.select("p").text("Hello World");
      
      // We can also add new elements by using the append() method:
      d3.select("body").append("p").text("Hello, this was added using D3!");
      
      // Check out the d3 object in your console:
      console.log(d3);
    </script>
    
    <p>We use the d3 keyword to use D3. d3 refers to an object.</p>
    <p>You can check out the d3 object using the console in your browser.</p>
    <p>In our code, we use d3.select("p").text("Hello World")</p>
    <p>We also use d3.select("body").append("p").text('Hello, this was a p element that was added using D3!')</p>
    <p>The select() property selects which html element to target.</p>
    <p>We then use append() and text() to add an element, or add text.</p>
    <p>As you can see, we use a bunch of methods that exist in d3. This is called <strong>Method Chaining</strong>.</p>
    <hr>
    
    <h1>Basic SVG Shapes</h1>
    <p>SVG stands for Scalable Vector Graphics.</p>
    <p>It is a way to create two dimensional graphics on our webpage.</p>
    <p>Firstly, when chaining methods we should break them into a new line, so they are more readable.</p>
    <p>To add stylistic elements to our properties, we can add the .style() method.
       The style method affects the CSS of the element, it takes two properties: the property and the value.</p>
    <p>We can also use the attr() method to change the attributes of elements.</p>
    <p>Note that we use attr() to style SVGS.</p>
    <script type="text/javascript">
      d3.select("body")
        .append("p")
        .style("color", "red")
        .text("This text is red, and is generated by D3!");
      
      // Create a container (canvas) to our SVG.
      // We also assign the SVG to our canvas variable.
      // It also saves us a lot of typing to use variables!
      // We cannot just add an SVG to the html, we need to create a canvas.
      // We use attr to set its width and height.
      // When styling SVG's, we use attr() instead of style()
      var canvas = d3.select("body")
        .append("svg")
        .attr("width", 500)
        .attr("height", 500);
      
      // Use the "cx" property, c stands for center and x stands for horizontal plane.
      // Same with "cy"
      // We give it a radius of 50px by using the "r" attr
      // We add colors to SVG using the fill property.
      var circle = canvas.append("circle")
                         .attr("cx", 250)
                         .attr("cy", 250)
                         .attr("r", 50)
                         .attr("fill", "red");
      
      // Now, lets create a rectangle using D3:
      // The rect, circle, and line are keywords. They tell the SVG which shape you are getting.
      // We did not give it any coordinates, (cx, cy) so it will be in the top left corner:
      var rect = canvas.append("rect")
                       .attr("width", 100)
                       .attr("height", 50)
      
      // Now, lets create a line using D3:
      // We use the coordinate system to determine how the line gets rendered.
      // The x1 is where the line starts on the x plane, x2 is where it ends on the x plane
      // The y1, y2 is where the line starts and ends on the y plane.
      // The stroke is the color, and the stroke-width is the width of the line.
      var line = canvas.append("line")
                       .attr("x1", 0)
                       .attr("y1", 100)
                       .attr("x2", 400)
                       .attr("y2", 400)
                       .attr("stroke", "green")
                       .attr("stroke-width", 5) 
    </script>   
    <hr>
    
    <h1>Visualizing Data</h1>
    
    <script>
      var canvas = d3.select("body")
        .append("svg")
        .attr("width", 500)
        .attr("height", 500);
      
      var dataArray = [20, 40, 50];
      
      // selectAll() selects all elements that we specify in the quotes.
      // However, we dont have any rectanges. So what selectAll() does is return an empty array.
      // But we can bind our data to it using data()
      // Then, we use the enter method to return placeholders for each data element for which there are no corresponding elements.
      // enter() is weird.
      /* So we select all the rectangles, the data method binds to the placeholders, 
         and the enter method creates placeholders for each and every data element.
      */
      var bars = canvas.selectAll("rect")
                       .data(dataArray)
                       .enter()
                       // For each placeholder that enter creates, append a bar (rect)
                         .append("rect")
                         // d is the SPECIFIC data element
                         .attr("width", function(d) { return d * 10;})
                         .attr("height", 50)
                         // Now we need to seperate each rectange we created. The SVG draws from the top left, so they overlap.
                         // First argument is specific data element, second is the index
                         .attr("y", function(d, i) { return i * 75; })
    </script>
    
</body>
</html>